<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" th:href="@{/style.css}" />
</head>
<body>
<div class="container">
    <h1>My Dashboard</h1>
    
    <div class="dashboard-section">
        <h2>Account Balance</h2>
        <p class="balance">$<span th:text="${#numbers.formatDecimal(dashboard.accountBalance, 1, 2)}">0.00</span></p>
    </div>

    <div class="deposit-section">
        <h3>Deposit Funds</h3>
        <form th:action="@{/dashboard/deposit}" method="post">
            <div class="form-group">
                <label for="amount">Amount:</label>
                <input type="number"
                       id="amount"
                       name="amount"
                       step="0.01"
                       min="0.01"
                       class="form-control"
                       required>
            </div>
            <button type="submit" class="btn btn-primary">Deposit</button>
        </form>
    </div>

    <div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
    
    <div class="dashboard-section">
        <h2>Recent Deliveries</h2>
        <ul>
            <li th:each="delivery : ${dashboard.deliveries}">
                <p>Order ID: <span th:text="${delivery.orderId}">0</span></p>
                <p>Status: <span th:text="${delivery.status}">Unknown</span></p>
                <p>Update Time: <span th:text="${#temporals.format(delivery.updateTime, 'yyyy-MM-dd HH:mm:ss')}">Date</span></p>
            </li>
        </ul>
    </div>

    <div class="actions">
        <a th:href="@{/products}" class="link">Back to Product List</a>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="btn">Log Out</button>
        </form>
    </div>
</div>
</body>
</html>